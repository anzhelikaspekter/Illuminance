<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Reset your password securely to regain access to your account.">
    <title>Forgot password</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/style.min.css">
</head>

<body class="section forgot-password">
    <!-- Header -->
    <header class="forgot-password__header" role="banner">
        <button id="close-btn" class="icon close large" type="button" aria-label="Close"></button>
    </header>
    <!-- Main -->
    <main id="main" class="forgot-password__wrap" tabindex="-1">
        <div class="forgot-password__form">
            <div class="forgot-password__title-wrap">
                <h1 class="title primary primary--light">Restore password</h1>
                <p class="desc primary primary--middle">A code will be sent to your email to log into your account.</p>
            </div>

            <form action="#" method="post" class="form" novalidate>
                <div class="form__wrap">
                    <div class="form__input-field">
                        <label class="desc primary primary--light" for="email">Email</label>
                        <input class="form__input" name="email" id="email" type="email" inputmode="email"
                            autocomplete="email" placeholder="example@mail.com" required aria-invalid="false"
                            aria-describedby="email-error" />
                        <p id="email-error" class="desc primary primary--error hide" role="alert">
                            Enter a valid email with “@” and a domain.
                        </p>
                    </div>
                </div>

                <div class="form__btns-field">
                    <button type="submit" class="form__btn disabled" disabled>Send password</button>
                </div>
            </form>
        </div>

        <p class="desc primary primary--middle">By registering, you agree to the Privacy and Data Use Policy.</p>
    </main>
    <!-- Scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            /* ===== Form validation ===== */
            const form = document.querySelector('.form');
            const emailInput = form.querySelector('#email');
            const emailError = document.getElementById('email-error');
            const submitBtn = form.querySelector('.form__btn');

            const EMAIL_RE = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            function setError(on, msg) {
                emailInput.setAttribute('aria-invalid', on ? 'true' : 'false');
                emailInput.classList.toggle('error', on);
                if (on) {
                    if (msg) emailError.textContent = msg;
                    emailError.classList.remove('hide');
                } else {
                    emailError.classList.add('hide');
                }
            }

            function setSubmitEnabled(on) {
                submitBtn.disabled = !on;
                submitBtn.classList.toggle('disabled', !on);
            }

            function validate() {
                const val = emailInput.value.trim();
                const isValid = EMAIL_RE.test(val);
                if (!val) {
                    setError(false);
                    setSubmitEnabled(false);
                    return false;
                }
                if (!isValid) {
                    setError(true, 'Enter a valid email with “@” and a domain.');
                    setSubmitEnabled(false);
                    return false;
                }
                setError(false);
                setSubmitEnabled(true);
                return true;
            }

            emailInput.addEventListener('input', validate);

            form.addEventListener('submit', (e) => {
                if (!validate()) {
                    e.preventDefault();
                    emailInput.focus();
                    return;
                }
            });

            document.getElementById('main')?.focus();
            validate();
        });
    </script>
</body>

</html>