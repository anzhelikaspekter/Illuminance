<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Secure login page for registered users. Access your dashboard and continue your workflow safely.">
    <title>Sign In</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/style.min.css">
</head>

<body class="section signin">
    <!-- Header -->
    <header class="signin__header" role="banner">
        <button id="close-btn" class="icon close large" type="button" aria-label="Close"></button>
    </header>
    <!-- Main -->
    <main id="main" class="signin__wrap" tabindex="-1">
        <div class="signin__form">
            <h1 class="title primary primary--light">Sign In</h1>

            <form action="#" method="post" class="form" novalidate>
                <div class="form__wrap">
                    <div class="form__input-field">
                        <label class="desc primary primary--light" for="email">Email</label>
                        <input class="form__input" name="email" id="email" type="email" placeholder="example@mail.com"
                            required inputmode="email" autocomplete="email" aria-invalid="false"
                            aria-describedby="email-error" />
                        <p id="email-error" class="desc primary primary--error hide" role="alert">Enter a valid email
                            with “@” and a
                            domain.</p>
                    </div>

                    <div class="form__input-field">
                        <label class="desc primary primary--light" for="password">Password</label>
                        <div class="password-field">
                            <input class="form__input" name="password" id="password" type="password"
                                placeholder="Enter your password" required autocomplete="current-password"
                                aria-invalid="false" aria-describedby="password-error" />
                            <button type="button" class="toggle-pass icon eye show" aria-pressed="false"
                                aria-label="Show password"></button>
                        </div>
                        <p id="password-error" class="desc primary primary--error hide" role="alert">Incorrect password.
                            Please try
                            again.</p>
                        <a href="forgot-password.html" class="form__link">Forgot your password?</a>
                    </div>
                </div>

                <div class="form__btns-field">
                    <button type="submit" class="form__btn disabled" disabled>Sign In</button>

                    <div class="definder" aria-hidden="true">
                        <span class="line"></span> or <span class="line"></span>
                    </div>

                    <button type="button" class="btn google" aria-label="Continue with Google">
                        Continue with <span class="icon google" aria-hidden="true"></span>
                    </button>
                </div>

                <div class="form__reg-field">
                    <span class="desc primary primary--middle">Don't have an account yet?</span>
                    <a href="sign-up.html" class="form__link">Sign up</a>
                </div>
            </form>
        </div>

        <p class="desc primary primary--middle">By registering, you agree to the Privacy and Data Use Policy.</p>
    </main>
    <!-- Scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            /* ===== Form logic ===== */
            const form = document.querySelector('.form');
            const emailInput = form.querySelector('#email');
            const passwordInput = form.querySelector('#password');
            const emailError = document.getElementById('email-error');
            const passError = document.getElementById('password-error');
            const submitBtn = form.querySelector('.form__btn');
            const toggleBtn = form.querySelector('.password-field .toggle-pass');

            const EMAIL_RE = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            function setFieldError(input, errorEl, on, msg) {
                input.setAttribute('aria-invalid', on ? 'true' : 'false');
                input.classList.toggle('error', on);
                if (errorEl) {
                    if (msg) errorEl.textContent = msg;
                    errorEl.classList.toggle('hide', !on);
                }
            }

            function validate() {
                const em = emailInput.value.trim();
                const pw = passwordInput.value;

                const emailOk = em !== '' && EMAIL_RE.test(em);
                const passOk = pw !== '';

                setFieldError(emailInput, emailError, em ? !emailOk : false, 'Enter a valid email with “@” and a domain.');
                setFieldError(passwordInput, null, false);

                const formOk = emailOk && passOk;
                submitBtn.disabled = !formOk;
                submitBtn.classList.toggle('disabled', !formOk);
                return formOk;
            }

            toggleBtn?.addEventListener('click', () => {
                const willShow = passwordInput.type === 'password';
                passwordInput.type = willShow ? 'text' : 'password';
                toggleBtn.setAttribute('aria-pressed', willShow ? 'true' : 'false');
                toggleBtn.setAttribute('aria-label', willShow ? 'Hide password' : 'Show password');

                const isShownNow = passwordInput.type === 'text';
                toggleBtn.classList.toggle('show', !isShownNow);
                toggleBtn.classList.toggle('unshow', isShownNow);
            });

            emailInput.addEventListener('input', validate);
            passwordInput.addEventListener('input', validate);

            form.addEventListener('submit', (e) => {
                if (!validate()) {
                    e.preventDefault();
                    (document.querySelector('.form__input.error') || emailInput).focus();
                    return;
                }
            });

            document.getElementById('main')?.focus();
            validate();
        });
    </script>
</body>

</html>