<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Explore all sections of Illuminance.">
    <title>Illuminance</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/style.min.css">
</head>

<body class="section menu">
    <!-- Skip link -->
    <a class="visually-hidden focusable" href="#menu-nav" hidden>Skip to menu</a>
    <!-- Header -->
    <header class="menu__header" role="banner">
        <a href="index.html" class="menu__logo">
            <img src="img/logo.svg" width="208" height="24" alt="Illuminance" class="logo">
        </a>

        <a id="menu-close" class="menu__close" href="/" aria-label="Close menu">
            <img src="img/icons/close.svg" width="72" height="72" alt="Close" class="icon">
        </a>
    </header>
    <!-- Menu -->
    <main id="main" class="menu__wrap" tabindex="-1">
        <nav id="menu-nav" class="menu__nav" aria-label="Main">
            <ul class="menu__list">
                <li class="menu__item">
                    <a href="index.html" class="menu__link" aria-current="page">Home</a>
                </li>
                <li class="menu__item">
                    <a href="about.html" class="menu__link">About Us</a>
                </li>
                <li class="menu__item">
                    <a href="strategy.html" class="menu__link">Our Strategy</a>
                </li>
                <li class="menu__item">
                    <a href="philanthropy.html" class="menu__link">Philanthropic Initiatives</a>
                </li>
                <li class="menu__item">
                    <a href="partners.html" class="menu__link">Partner System</a>
                </li>
                <li class="menu__item">
                    <a href="representative.html" class="menu__link">International
                        Representative</a>
                </li>
                <li class="menu__item">
                    <a href="node.html" class="menu__link">Node</a>
                </li>
                <li class="menu__item">
                    <a href="future.html" class="menu__link">Our Future</a>
                </li>
                <li class="menu__item">
                    <a href="news.html" class="menu__link">News</a>
                </li>
                <li class="menu__item">
                    <a href="contact.html" class="menu__link">Contact Us</a>
                </li>
            </ul>

            <aside class="menu__news" aria-labelledby="stay-updated">
                <div class="menu__news-header">
                    <h2 id="stay-updated" class="title secondary secondary--light">Stay Updated</h2>
                    <a href="article.html" class="menu__news-link" aria-label="View all news">
                        <img src="img/icons/arrow_left_up.svg" width="16" height="16" alt="View all news" class="icon">
                    </a>
                </div>

                <article class="card">
                    <a href="article.html" class="card__link">
                        <figure class="card__wrap">
                            <img class="card__img" width="300" height="200" src="img/card-img.webp"
                                alt="Capital Preservation â€” article cover" loading="lazy">
                            <figcaption class="card__meta tooltip tooltip--light">
                                <time datetime="2022-09-03" class="tooltip__title tooltip__title--dark">
                                    September 3, 2022
                                </time>
                            </figcaption>
                        </figure>
                        <div class="card__wrap">
                            <h3 class="title thirdly thirdly--light">Capital Preservation</h3>
                            <p class="desc primary primary--middle">
                                Assets are distributed across multiple pools with strict risk limits,
                                minimizing potential losses.
                            </p>
                        </div>
                    </a>
                </article>
            </aside>
        </nav>
    </main>
    <!-- Scripts -->
    <script>
        (function () {
            const closeLink = document.getElementById('menu-close');
            const main = document.getElementById('main');

            const sp = new URLSearchParams(location.search);
            const qsReturn = sp.get('returnTo');
            const fromQuery = qsReturn && decodeURIComponent(qsReturn);
            const fromRef = document.referrer && new URL(document.referrer).origin === location.origin ? document.referrer : null;
            const fallback = '/';

            const returnTo = fromQuery || fromRef || fallback;
            closeLink.setAttribute('href', returnTo);

            main.focus();

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    window.location.assign(closeLink.href);
                }
            });
        })();
        (function () {
            // ====== Settings ======
            const NAV_SELECTOR = '.menu__nav';
            const ACTIVE_CLASS = 'active';
            const USE_PREFIX_MATCH = true;
            const HONOR_RETURN_TO = true;

            // ====== Utilities ======
            const sameOrigin = (url) => {
                try { return new URL(url, location.origin).origin === location.origin; }
                catch { return false; }
            };

            const normalizePath = (href) => {
                if (!href || href === '#') return '/';
                const u = new URL(href, location.origin);
                let p = u.pathname;

                if (/\/index\.html?$/i.test(p)) p = p.replace(/\/index\.html?$/i, '/');

                if (p !== '/') p = p.replace(/\/+$/, '');
                return p || '/';
            };

            const sp = new URLSearchParams(location.search);
            let targetPath = location.pathname;

            if (HONOR_RETURN_TO) {
                const rt = sp.get('returnTo');
                if (rt && sameOrigin(rt)) targetPath = new URL(rt, location.origin).pathname;
                else if (document.referrer && sameOrigin(document.referrer)) {
                    targetPath = new URL(document.referrer).pathname;
                }
            }

            targetPath = normalizePath(targetPath);

            document.querySelectorAll(NAV_SELECTOR).forEach(nav => {
                const links = Array.from(nav.querySelectorAll('a[href]'));

                links.forEach(a => {
                    a.removeAttribute('aria-current');
                    a.classList.remove(ACTIVE_CLASS);
                    a.closest('li')?.classList.remove(ACTIVE_CLASS);
                });

                const candidates = links
                    .filter(a => sameOrigin(a.href))
                    .map(a => ({ el: a, path: normalizePath(a.getAttribute('href')) }));

                let match = candidates.find(c => c.path === targetPath);

                if (!match && USE_PREFIX_MATCH && targetPath !== '/') {
                    match = candidates
                        .filter(c => c.path !== '/' && (targetPath + '/').startsWith(c.path + '/'))
                        .sort((a, b) => b.path.length - a.path.length)[0];
                }

                if (!match) {
                    match =
                        candidates.find(c => c.path === '/') ||
                        (() => {
                            const homeLink = links.find(a => a.textContent.trim().toLowerCase() === 'home');
                            return homeLink ? { el: homeLink } : null;
                        })() ||
                        (links[0] ? { el: links[0] } : null);
                }

                if (match && match.el) {
                    match.el.setAttribute('aria-current', 'page');
                    match.el.classList.add(ACTIVE_CLASS);
                    match.el.closest('li')?.classList.add(ACTIVE_CLASS);
                }
            });
        })();
    </script>
</body>

</html>